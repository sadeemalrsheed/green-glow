{% extends 'base.html' %}
{% block title %} Agent Crop: Get Instant & Accurate Crop Disease Detection {% endblock %}
{% block content %}
	{% with messages = get_flashed_messages() %}  
		{% if messages %}  
			{% for message in messages %}
				<div class="alert alert-warning text-center" role="alert" style="padding-top: 64px;">
					<p class="mb-0 mt-3">{{ message }}</p>
				</div>
			{% endfor %}  
		{% endif %}  
	{% endwith %}
	<div class="alert alert-warning text-center" role="alert" id="alert"></div>
	<div class="container px-4 px-md-3">
		<div class="row align-items-lg-center align-items-md-center">
			<div class="col-9 mx-auto col-md-6 order-md-4 col-lg-5">
				<img src="{{ url_for('static', filename='Agent-Crop-1000x1000.png') }}" alt="Agent Crop Logo" height="500" width="500" class="img-fluid">
			</div>
			<div class="col justify-content-center pt-4">
				<h1 class="mb-3 custom-font">Get Instant & Accurate Crop Disease Detection with Agent Crop</h1>
				<form action="/predict" method="POST" enctype="multipart/form-data">
					<div class="mb-0" style="max-width: 300px;">
						<label for="file" class="form-label">Upload Your Image Here:</label>
						<input class="form-control" type="file" name="file" accept=".jpg, .png, .jpeg" id="file" required>
					</div>
					<div class="pt-2">
						<p>Note: Max file size is 50 MB. Only PNG, JPG/JPEG files are allowed. Your images will be deleted after 1 hour.</p>
						<p><a href="#crops-list" style="color: white;">List of supported crops</a></p>
					</div>
					<div>
						<button class="btn btn-light btn-lg" type="submit">Predict Now</button>
					</div>
				</form>
				
				{% if prediction %}
					<div class="text-center mt-4">
						<h2>Prediction Result:</h2>
						<p><strong>{{ prediction }}</strong></p>
					</div>
				{% endif %}
			</div>
		</div>
	
		<div id="image_preview" class="row mt-3 justify-content-center"></div>
	</div>
	
	<script src="{{ url_for('static', filename='main.js') }}" defer></script>